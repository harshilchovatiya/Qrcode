<!DOCTYPE html>
<html>
<head>
    <title>QR Code Scanner</title>
    <meta name="author" content="Harshil Chovatiya">
    <meta name="description" content="QR Code Scanner Web App">
</head>
<body>
    <h1>QR Code Scanner</h1>
    <video id="video" width="300" height="200" autoplay></video>
    <button id="scan-button">Scan QR Code</button>

    <script>
        // Get the video element and button
        const video = document.getElementById('video');
        const scanButton = document.getElementById('scan-button');

        // Function to handle the scanning process
        async function scanQRCode() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;

                const qrCodeScanner = new Instascan.Scanner({ video });

                qrCodeScanner.addListener('scan', function (content) {
                    // Check if the scanned content is a valid URL
                    if (isURL(content)) {
                        // Open the link in a new page
                        window.open(content, '_blank');
                    }
                });

                Instascan.Camera.getCameras().then(function (cameras) {
                    if (cameras.length > 0) {
                        qrCodeScanner.start(cameras[0]);
                    } else {
                        console.error('No cameras found.');
                    }
                });
            } catch (error) {
                console.error('Error accessing the camera: ' + error);
            }
        }

        // Event listener for the scan button
        scanButton.addEventListener('click', scanQRCode);

        // Function to check if a given string is a URL
        function isURL(str) {
            const pattern = new RegExp('^(https?:\\/\\/)?' +
                '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' +
                '((\\d{1,3}\\.){3}\\d{1,3}))' +
                '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' +
                '(\\?[;&a-z\\d%_.~+=-]*)?' +
                '(\\#[-a-z\\d_]*)?$', 'i');
            return !!pattern.test(str);
        }
    </script>

    <!-- Include the Instascan library for QR code scanning -->
    <script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
</body>
</html>
